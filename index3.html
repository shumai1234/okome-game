<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プレイヤー購入ページ</title>
    <link rel="stylesheet" href="assets/commonStyle.css">
    <link rel="stylesheet" href="assets/style3.css">
</head>
<body>
    <section class="main">
    <h1 id="EC1">ここに今日の景気が表示されます</h1>
    <h2>[仕入ターンです/お米を仕入れてください]</h2>
    <h3>現在入荷可能な米一覧です/<span id="arrayDisplay"></span></h3>
    <h3>現在入荷可能な米一覧の価格です/<span id="arrayDisplay2"></span></h3>
    <figure class="riceSelection">
        <img src="assets/images/koshihikari.PNG" class = "riceImage" data-index = "0" alt="米俵の画像">
        <img src="assets/images/shinnosuke.PNG"class = "riceImage" data-index = "1" alt="米俵の画像">
        <img src="assets/images/koshiibuki.PNG" class = "riceImage" data-index = "2" alt="米俵の画像">
        <img src="assets/images/haenuki.PNG" class = "riceImage" data-index = "3" alt="米俵の画像">
        <img src="assets/images/zunzuro.PNG" class = "riceImage" data-index = "4" alt="米俵の画像">
        <img src="assets/images/gaikokusan.PNG" class = "riceImage" data-index = "5" alt="米俵の画像">
    </figure>
    
    <!--<label for="indexInput">選択したいコメの種類を左から何番目かで選択してください</label>
    <input type="number" id="indexInput" min="0" max="5" value="0">-->
   
   <!-- <button onclick="selectKind()">コメの種類を選択</button> -->
</section>
 <section class="main2">
    <hr>
    <h2>結果</h2>
    
    <p id="result">ここに選択された米の種類が表示されます</p>
    <p id="result2">ここに仕入れた米の総額（お客さん５人分の価格）が表示されます</p>
    <button class="nextIndex4BTN" onclick="location.href = 'index4.html'">販売ターンに進む</button>
    </section>



    <script>
       //次のページで客に何度も売る不正を防ぐためのページ
       localStorage.setItem('soldOut', 'soldOut');
        // index2.htmlで保存した今日の景気を取得して表示　　　
        //今日の景気の状態はEconomyConditionsに格納
        const EconomyConditions = localStorage.getItem('EC');
        document.getElementById('EC1').textContent = `今日の景気は${EconomyConditions}です`;

        const nextIndex4BTN = document.querySelector(".nextIndex4BTN");
        nextIndex4BTN.disabled=true;
        
        //入荷可能なお米の種類の配列を表示
        const kinds = ["魚沼産コシヒカリ","新之助","コシイブキ","はえぬき","ズンズロー米","外国産米"];
        const prices2 = [2500,1750,1000,750,500,250]//それぞれの米の仕入れ価格リスト]

        document.getElementById('arrayDisplay').textContent = 
         `[${kinds.join(", ")}]`;

        document.getElementById('arrayDisplay2').textContent = 
         `[${prices2.join("円, ")}円]`;

         //選択された画像をもとにコメの種類を表示
         const riceImages = document.querySelectorAll('.riceImage');
         const resultElement = document.getElementById('result');
         riceImages.forEach((img)=>{
            img.addEventListener('click',function(){
                const index = Number(this.dataset.index);
                
                const totalExpense = prices2[index];
            
            localStorage.setItem('totalExpense', totalExpense);
            document.getElementById('result2').textContent = `仕入れた米の総額は${totalExpense}円です`;


            const selectedKind = kinds[index];
            resultElement.textContent = `選択された米の種類は ${selectedKind}です。`;

            
            //選択されたコメの種類をlocalStorageに保存
            //選択された米の種類を呼び足すにはselectedKindを使う
            localStorage.setItem('selectedKind', selectedKind);
            localStorage.setItem('selectedIndex', index);

            nextIndex4BTN.disabled = false;
            
            })
         })


         //！！以下旧版！！//
        //テキストフィールドの入力値を取得し、選択したコメの種類を表示
       // function selectKind() {
         //   const inputField = document.getElementById('indexInput');
           // const index = parseInt(inputField.value);
            //const resultElement = document.getElementById('result');

            //米の仕入れ価格の合計（５個分）を表示//totalExpenseで仕入れた米の価格の総額を呼び出せるよ！
            //const expense = prices2[index];
            //const totalExpense = expense * 5;
            //localStorage.setItem('totalExpense', totalExpense);
            //document.getElementById('result2').textContent = `仕入れた米の総額は${totalExpense}円です`;


            //const selectedKind = kinds[index];
            //resultElement.textContent = `選択された米の種類は ${selectedKind}です。`;

            //選択されたコメの種類をlocalStorageに保存
            //選択された米の種類を呼び足すにはselectedKindを使う
            //localStorage.setItem('selectedKind', selectedKind);
           // localStorage.setItem('selectedIndex', index);
           
        //}

    </script>
</body>
</html>